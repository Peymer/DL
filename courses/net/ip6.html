<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../reveal.css">
    <link rel="stylesheet" href="../black.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../monokai.css">
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <h1>Адресация. IPv6</h1>
            </section>
            <section>
                <section>
                    <h2>История</h2>
                </section>
                <section>
                    <ul>
                        <li>IPv4: 10.182.59.150 маска 255.255.255.0 или 10.182.59.150/24 &mdash; адресов катастрофически
                            не хватает</li>
                        <li>TUBA &mdash; адресация с переменнод длиной адреса &mdash; ущерб производительности</li>
                        <li>IPv6 &mdash; новый протокол большой ескости.</li>
                    </ul>
                </section>
                <section>
                    <p>IPv4: 32 бита в адресе</p>
                    <p>IPv6: 128 бита в адресе</p>
                    <p>224.0.0.0/4 &mdash; адреса многоадресной рассылки IPv4</p>
                    <p>В IPv6 работа группового вещания переделана полностью</p>
                </section>
            </section>
            <section>
                <section>
                    <h2>Адреса IPv6</h2>
                </section>
                <section>
                    <p>2001:DB8:0:0:0:0:0:1</p>
                    <p>8 групп по 16 бит. Каждая группа &mdash; 16-ричное число: от 0000 до FFFF.<br />
                        Группы разделяют между собой знаком «:»<br />
                        В группах опускат ведущие нули.<br />
                        Cамую большую последовательность нулей можно заменить на "::"</p>
                </section>
                <section>
                    <p>Примеры:<br />
                        fdf0:6f2b:5aec:4:327f:5244:9f93:6e9a<br />
                        fe80::b61a:c886:9506:21b9<br />
                        2001:DB8:0:0:0:0:0:1<br />
                        2001:DB8::1</p>
                </section>
                <section>
                    <p>Сетевая маска обычно /64</p>
                    <p>Канал &mdash; это пространство, где узлы сети могут обмениваться между собой любыми пакетами
                        данных без использования промежуточных узлов.</p>
                    <p>Устройство может иметь не один IPv6 адрес, а сразу несколько.</p>
                </section>
            </section>
            <section>
                <section>
                    <h2>link-local адреса</h2>
                </section>
                <section>
                    <p>В IPv4: 169.254.0.0/16 &mdash; если на интерфейсе не задан IP адрес</p>
                    <p>В IPv6 для link-local выделен специальный диапазон fe80::/10</p>
                    <p>Не смотря на маску /10, реально используется /64</p>
                </section>
                <section>
                    <p>Любой узел при подключении к сети IPv6 <b>обязан</b> взять себе адрес из этого диапазона. </p>
                    <p>Адресы могут пересекаться на комьютере.<br />
                        В адрес включен сетевой интерфейс<br />
                        fe80::1%ens3, где ens3 — имя сетевого интерфейса или<br />
                        fe80::1%3.</p>
                </section>
                <section>
                    <p style="color: red;">IPv4 адрес изменится, если в сети появится DHCP сервер, а IPv6 адрес
                        останется и продолжит
                        работать не зависимо от настроек сети.</p>
                    <p>Link-local адрес всегда выбирается по определённому алгоритму, благодаря чему этот адрес для
                        интерфейса всегда одинаковый и не меняется со временем.</p>
                </section>
                <section>
                    <p style="color:greenyellow;">Link-local адресации вполне достаточно, чтобы открыть для сети папку
                        или принтер для других
                        машин, которые подключены к вашему каналу.</p>
                    <p>В сети IPv6 маршрутизатор может вообще не иметь никаких других адресов, кроме link-local, но при
                        этом успешно маршрутизировать пакеты.</p>
                    <aside class="notes">Если на вашей машине активирован протокол IPv6, то даже если вы не настраивали
                        IPv6 сети и используете Windows, то вполне вероятно, что большая часть трафика в внутри сети
                        между устройствами через стандартные механизмы Windows ходит именно по IPv6. Например, протокол
                        LLMNR (Link-Local Multicast Name Resolution) позволяет найти IPv6 адреса устройств с
                        использованием запросов на групповые адреса. Именно поэтому, когда вы обращаетесь к соседнему
                        устройству по имени, то вы с большой долей вероятности с помощью LLMNR получите его link-local
                        адрес и обратитесь к его сетевым ресурсам именно по сети IPv6. Это просто магия IPv6!!! Вы
                        ничего не настраивали, но уже всё работает. И это не сломается, даже если добавите вашей сети
                        новые возможности, например, выход в сеть интернет, просто потому, что link-local адреса с вами
                        всегда.</aside>
                </section>

            </section>
            <section>
                <section>
                    <h2>Частные индивидуальные адреса (ULA)</h2>
                </section>
                <section>
                    <p>Задача:</p>
                    <p>Представьте себе ситуацию, что вы решили объединить две сети.</p>
                    <p>10.0.0.0/8, 172.16.0.0/12 и 192.168.0.0/16.</p>
                    <p>Использование NAT или proxy</p>
                    <aside class="notes">Если у вас сеть IPv4, то вы начинаете использовать стандартные выделенные
                        диапазоны: 10.0.0.0/8,
                        172.16.0.0/12 и 192.168.0.0/16.<br />
                        Благодаря использованию этих адресов, в дальнейшем, вы легко сможете
                        подключиться к сети интернет, поскольку данные адреса используются только в частных сетях и не
                        будет конфликта адресов. <br />
                        Разве что придётся применить специальный костыль (NAT), который будет
                        подменять адрес из этого диапазона на тот, который способен маршрутизироваться в интернете.
                    </aside>
                </section>
                <section>
                    <p>Решение IPv6:</p>
                    <p>fd00::/8</p>
                    <p>ULA — Unique local address</p>
                    <p>В отличие от IPv4, использование ULA не означает, что ваш сетевой адаптер перестаёт пользоваться
                        link-local адресом.</p>
                </section>
                <section>
                    <p>Использование:</p>
                    <p>Можно назначить вручную каждому хосту свой IPv6 адрес.<br />
                        При этом, можно добиться ещё более лаконичной записи адреса, чем в IPv4, напимер, fd12::1.<br />
                        Первая часть адреса fd12:0:0:0: — это выданная сеть (идентификатор сети),<br />
                        0:0:0:1 — адрес узла внутри сети /64 (идентификатор интерфейса).</p>
                </section>
                <section>
                    <p>SLAAC</p>
                    <p>Как только в сети появляется маршрутизатор, он рассылает всем клиентам всю необходимую
                        информацию. <br />
                        Устройства, получив анонс, могут автоматически сформировать свой уникальный адрес по
                        определённым алгоритмам и настроить свои сетевые интерфейсы.</p>
                </section>
                <section>
                    <p>DHCP IPv6</p>
                    <ul>
                        <li>за IPv6 адресом</li>
                        <li>за дополнительными параметрами</li>
                    </ul>
                    <aside class="notes">
                        DHCP теперь не обязан предоставлять вам адрес, хотя может это делать, но всё также может
                        подсказать вам где искать те или иные сервисы в сети. DHCPv6 становится опциональным, потому что
                        без него сеть IPv6 способна работать просто при наличии маршрутизатора.<br />
                        Этих адресов ещё недостаточно, чтобы получить полноценный доступ к интернет, но, как и в IPv4,
                        вы уже можете воспользоваться прокси-сервером или даже NAT.<br />
                        Однако использование NAT не
                        приветствуется в IPv6, и ваше устройство, скорее всего, предпочтёт использовать IPv4 адрес
                        вместо ULA, если, конечно, такая возможность имеется.
                    </aside>
                </section>

            </section>
            <section>
                <section>
                    <h2>Глобальные индивидуальные адреса IPv6 (GUA)</h2>
                    <aside class="notes">Global Unique Address</aside>
                </section>
                <section>
                    <p>2000::/3</p>
                    <aside class="notes">
                        (2XXX:... и 3XXX:...)
                    </aside>
                </section>
                <section>
                    <pre><code>2: enp2s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
link/ether 20:23:0d:db:09:10 brd ff:ff:ff:ff:ff:ff
inet6 2001:0db8:2023:0910:60e1:76bd:601e:fa2f/64 scope global temporary dynamic
    valid_lft 85496sec preferred_lft 2696sec
inet6 fd23:f1a9:d8a2::cea9:b317:45a2:eb90/64 scope global temporary dynamic
    valid_lft 528157sec preferred_lft 9546sec
inet6 fd23:f1a9::12/128 scope global dynamic noprefixroute
    valid_lft 42598sec preferred_lft 2696sec
inet6 2001:0db8:2023:0910::12/128 scope global dynamic noprefixroute
    valid_lft 42598sec preferred_lft 2696sec
inet6 2001:0db8:2023:0910:36e1:7563:52e3:9043/64 scope global temporary deprecated dynamic
    valid_lft 85496sec preferred_lft 0sec
inet6 2001:0db8:2023:0910:baa2:45c8:8915:6d10/64 scope global dynamic mngtmpaddr noprefixroute
    valid_lft 85496sec preferred_lft 2696sec
inet6 fd23:f1a9::cfab:64da:1f13:f335/64 scope global temporary deprecated dynamic
    valid_lft 441971sec preferred_lft 0sec
inet6 fd23:f1a9::90e:a9d9:2a14:1a03/64 scope global mngtmpaddr noprefixroute
    valid_lft forever preferred_lft forever
inet6 fe80::a33a:1d30:af11:d339/64 scope link noprefixroute
    valid_lft forever preferred_lft forever</code></pre>
                </section>
                <section>
                    <ol>
                        <li>fe80::a33a:1d30:af11:d339/64</li>
                        <li>fd23:f1a9::90e:a9d9:2a14:1a03/64</li>
                        <li>fd23:f1a9::12/128</li>
                        <li>fd23:f1a9::cea9:b317:45a2:eb90/64</li>
                        <li>fd23:f1a9::cfab:64da:1f13:f335/64</li>
                        <li>2001:0db8:2023:0910:baa2:45c8:8915:6d10/64</li>
                        <li>2001:0db8:2023:0910::12/128</li>
                        <li>2001:0db8:2023:0910:60e1:76bd:601e:fa2f/64</li>
                        <li>2001:0db8:2023:0910:36e1:7563:52e3:9043/64</li>
                    </ol>
                    <aside class="notes">
                        1 относится к link-local адресам. <br />
                        со 2 по 5 относятся к ULA <br />
                        с 6 по 9 к GUA.
                    </aside>
                </section>
            </section>
        </div>
    </div>

    <script src="../reveal.js"></script>
    <script src="../notes.js"></script>
    <!-- <script src="markdown.js"></script> -->
    <!-- <script src="../math/math.js"></script> -->
    <script src="../highlight.js"></script>
    <script>
        // More info about initialization & config:
        // - https://revealjs.com/initialization/
        // - https://revealjs.com/config/
        Reveal.initialize({
            hash: true,
            showSlideNumber: 'all',
            slideNumber: "true",
            // Learn about plugins:</b> https://revealjs.com/plugins/
            plugins: [RevealHighlight, RevealNotes]
            // plugins: [RevealHighlight, RevealNotes, RevealMath.KaTeX]
        });
    </script>
</body>

</html>